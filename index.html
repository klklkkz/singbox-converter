<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Sing-box é…ç½®è½¬æ¢å™¨ï¼ˆæœ¬åœ°è½¬æ¢ï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      padding: 1em;
      max-width: 800px;
      margin: auto;
    }
    textarea {
      width: 100%;
      height: 120px;
      padding: 10px;
      margin-bottom: 1em;
    }
    pre {
      white-space: pre-wrap;
      word-break: break-word;
      background: #f4f4f4;
      padding: 1em;
      border-radius: 6px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <h1>ğŸ“¦ Sing-box é…ç½®è½¬æ¢å·¥å…·</h1>
  <p>è¯·è®¿é—®è®¢é˜…é“¾æ¥ï¼Œå¤åˆ¶å…¶è¾“å‡º JSON å†…å®¹ç²˜è´´åˆ°ä¸‹æ–¹ï¼Œç„¶åç‚¹å‡»â€œè§£æé…ç½®â€ã€‚</p>
  <textarea id="jsonInput" placeholder="ç²˜è´´è®¢é˜…é“¾æ¥è¿”å›çš„ JSON å†…å®¹..."></textarea>
  <div>
    <button onclick="parseConfig()">è§£æé…ç½®</button>
    <button onclick="downloadConfig()">å¯¼å‡ºé…ç½®</button>
  </div>
  <p id="status"></p>
  <pre id="output"></pre>

  <script>
    let currentConfig = null;

    function parseConfig() {
      const raw = document.getElementById('jsonInput').value.trim();
      const output = document.getElementById('output');
      const status = document.getElementById('status');
      output.textContent = '';
      status.textContent = '';
      status.className = '';
      currentConfig = null;

      if (!raw) {
        status.textContent = 'è¯·è¾“å…¥ JSON å†…å®¹';
        status.className = 'error';
        return;
      }

      try {
        const config = JSON.parse(raw);
        currentConfig = config;
        output.textContent = JSON.stringify(config, null, 2);
        status.textContent = 'âœ… é…ç½®è§£ææˆåŠŸ';
      } catch (e) {
        status.textContent = 'âŒ JSON è§£æå¤±è´¥ï¼š' + e.message;
        status.className = 'error';
      }
    }

    function downloadConfig() {
      if (!currentConfig) {
        alert('è¯·å…ˆè§£æé…ç½®');
        return;
      }
      const blob = new Blob([JSON.stringify(currentConfig, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'singbox-config.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
